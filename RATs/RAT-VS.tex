\documentclass{article}
\usepackage{enumerate,amssymb,tikz, tikz-cd,amsmath,amsthm,multicol,hyperref,environ,etoolbox,graphicx,catchfile}

\usepackage[left=1in,right=1in,top=0.5in,bottom=0.7in,includeheadfoot]{geometry}
\usepackage{fancyhdr}

%%%Page layout setup%%%
\newcommand{\header}{Linear Algebra}
\newcommand{\setHeader}[1]{\renewcommand{\header}{#1}}

\newcommand{\moduleLetter}{X}

\pagestyle{fancy}
\fancyhf{}
\chead{\header}
\rfoot{Page \thepage}
\renewcommand{\headrulewidth}{1pt}
\renewcommand{\footrulewidth}{1pt}


\NewEnviron{module}[2]{
  \renewcommand{\moduleLetter}{#1}
  \setHeader{Module \moduleLetter{}: #2}
  \BODY
}
\NewEnviron{readinessAssuranceTest}{
  \newpage
  \subsection*{Readiness Check}
  Choose the most appropriate response for each question.
  \begin{enumerate}[1)]
    \BODY
  \end{enumerate}
}


\NewEnviron{readinessAssuranceTestChoices}{
  \begin{enumerate}[(a)]
    \BODY
  \end{enumerate}
}

%%%New Commands/Math operators%%%
\newcommand{\IR}{\mathbb{R}}
\newcommand{\IC}{\mathbb{C}}
\renewcommand{\P}{\mathcal{P}}
\renewcommand{\Im}{\operatorname{Im}}
\newcommand{\RREF}{\operatorname{RREF}}
\newcommand{\vspan}{\operatorname{span}}
\newcommand{\setList}[1]{\left\{#1\right\}}
\newcommand{\setBuilder}[2]{\left\{#1\,\middle|\,#2\right\}}
%This code allows for augmented matrices, e.g. by \begin{bmatrix}[cc|c] ...
\makeatletter
\renewcommand*\env@matrix[1][*\c@MaxMatrixCols c]{%
  \hskip -\arraycolsep
  \let\@ifnextchar\new@ifnextchar
  \array{#1}}
\makeatother

%C B C D A   A C D C B


\begin{document}
\begin{module}{VS}{Vector Spaces}
\begin{readinessAssuranceTest}
\setcounter{enumi}{10}

%C
\item Simplify the following Euclidean vector expression.
  \[
  2
  \begin{bmatrix}
    3 \\ -1 \\ 0
  \end{bmatrix}-
  3
  \begin{bmatrix}
    0 \\ 2 \\ 1
  \end{bmatrix}
  \]

\begin{multicols}{4}
\begin{readinessAssuranceTestChoices}
\item \(
        \begin{bmatrix}
          3 \\ 2 \\ -5
        \end{bmatrix}
      \)
\item \(
        \begin{bmatrix}
          0 \\ 4 \\ -8
        \end{bmatrix}
      \)
\item \(
        \begin{bmatrix}
          6 \\ -8 \\ -3
        \end{bmatrix}
      \) % correct
\item \(
        \begin{bmatrix}
          -2 \\ 0 \\ 1
        \end{bmatrix}
      \)
\end{readinessAssuranceTestChoices}
\end{multicols}

\item Simplify the following Euclidean vector expression.
  \[
  2\left(
  \begin{bmatrix}
    1 \\ 1 \\ -1
  \end{bmatrix}+
  \begin{bmatrix}
    -1 \\ 1 \\ -3
  \end{bmatrix}\right)
  \]

\begin{multicols}{4}
\begin{readinessAssuranceTestChoices}
\item \(
        \begin{bmatrix}
          3 \\ 2 \\ -5
        \end{bmatrix}
      \)
\item \(
        \begin{bmatrix}
          0 \\ 4 \\ -8
        \end{bmatrix}
      \) % Correct
\item \(
        \begin{bmatrix}
          6 \\ -8 \\ -3
        \end{bmatrix}
      \) 
\item \(
        \begin{bmatrix}
          -2 \\ 0 \\ 1
        \end{bmatrix}
      \)
\end{readinessAssuranceTestChoices}
\end{multicols}


\item Which of the following vectors is an element of the set
      \(\setBuilder{\begin{bmatrix}x \\ y \\ z \end{bmatrix}}{ x^2-3y=z} \)?

\begin{multicols}{4}
\begin{readinessAssuranceTestChoices}
\item \(\begin{bmatrix} 1 \\ 2 \\ 1 \end{bmatrix}\) 
\item \(\begin{bmatrix} 1 \\ 1 \\ 2 \end{bmatrix}\) 
\item \(\begin{bmatrix} 2 \\ 1 \\ 1 \end{bmatrix}\) % correct
\item \(\begin{bmatrix} 1 \\ 1 \\ 1 \end{bmatrix}\) 
\end{readinessAssuranceTestChoices}
\end{multicols}

\item Which of the following vectors is an element of the set
		\(\setBuilder{\begin{bmatrix} x_1 \\ x_2 \\ x_3 \end{bmatrix}}{ x_1+3x_2-x_3=0}\)?

\begin{multicols}{4}
\begin{readinessAssuranceTestChoices}
\item \(\begin{bmatrix} 1 \\ 5 \\ 2 \end{bmatrix}\) 
\item \(\begin{bmatrix} 5 \\ 1 \\ 2 \end{bmatrix}\) 
\item \(\begin{bmatrix} 1 \\ 2 \\ 5 \end{bmatrix}\) 
\item \(\begin{bmatrix} 2 \\ 1 \\ 5 \end{bmatrix}\) % correct

\end{readinessAssuranceTestChoices}
\end{multicols}

\item Simplify \(3f(x)-2g(x)\) where
      \(f(x)=7-x^2\) and
      \(g(x)=2x^3+x-1\).

\begin{multicols}{4}
\begin{readinessAssuranceTestChoices}
\item \(-4x^3-3x^2-2x+23\) % correct
\item \(-x^3+19x^2-4\)
\item \(x^3+4x-5\)
\item \(3x^3+5x^2-3x+17\)
\end{readinessAssuranceTestChoices}
\end{multicols}


\item Express the following system of linear equations as an augmented matrix.
\begin{align*}
  x_1 + 2x_2      -  x_4 &= 3 \\
             x_3 + 4x_4 &= -2
\end{align*}

\begin{multicols}{3}
\begin{readinessAssuranceTestChoices}
\item \(
      \begin{bmatrix}[cccc|c]
        1 & 2 & 0 & -1 & 3 \\
        0 & 0 & 1 & 4 & -2
      \end{bmatrix}
    \) % correct
\item \(
      \begin{bmatrix}[cccc|c]
        1 & 2 & 1 & 4 & 3 \\
        -2 & 1 & 3 & 4 & 5
      \end{bmatrix}
    \)
\item \(
      \begin{bmatrix}[c|c]
        1 & 0 \\
        2 & 0 \\
        0 & 1 \\
        -1 & 4 \\
        -2 & 3
      \end{bmatrix}
    \)
\item \(
      \begin{bmatrix}[c|c]
        1 & 2 \\
        0 & -1 \\
        3 & 0 \\
        0 & 1 \\
        4 & -2
      \end{bmatrix}
    \)

\end{readinessAssuranceTestChoices}
\end{multicols}

\item Which of the following matrices is equivalent to the following matrix?
  \[
    \begin{bmatrix}[ccc|c]
      1 & 2 & 3 & -1 \\
      0 & 4 & -1 & 2 \\
      2 & 3 & 2 & 3 \\
    \end{bmatrix}
  \]
  (Hint: The correct answer was obtained from a single row operation.)

  \begin{multicols}{4}
  \begin{readinessAssuranceTestChoices}
  \item
    \(
      \begin{bmatrix}[ccc|c]
        1 & 2 & 3 & -1 \\
        0 & 4 & -1 & 2 \\
        0 & 0 & 1 & 7\\
      \end{bmatrix}
    \)
  \item
    \(
      \begin{bmatrix}[ccc|c]
        1 & 2 & 3 & -1 \\
        1 & 3 & 4 & 3 \\
        2 & 3 & 2 & 3\\
      \end{bmatrix}
    \)
  \item
    \(
      \begin{bmatrix}[ccc|c]
        1 & 2 & 3 & -1 \\
        0 & 4 & -1 & 2 \\
        0 & -1 & -4 & 5 \\
      \end{bmatrix}
    \) % correct
      \item
    \(
      \begin{bmatrix}[ccc|c]
        1 & 2 & 3 & -1 \\
        0 & 1 & 1 & 4 \\
        2 & 3 & 2 & 3 \\
      \end{bmatrix}
    \)
  \end{readinessAssuranceTestChoices}
  \end{multicols}

\item Find
  \(\RREF
    \begin{bmatrix}[ccc]
      1 & 2 & 3 \\
      0 & 4 & -1 \\
      2 & 3 & 2 \\
    \end{bmatrix}
  \).

  \begin{multicols}{4}
  \begin{readinessAssuranceTestChoices}
  \item
    \(
      \begin{bmatrix}[ccc]
        1 & 0 & 3 \\
        0 & 1 & -1 \\
        0 & 0 & 0 \\
      \end{bmatrix}
    \)
  \item
    \(
      \begin{bmatrix}[ccc]
        1 & 2 & 3 \\
        1 & 3 & 4 \\
        0 & 0 & 0 \\
      \end{bmatrix}
    \)
  \item
    \(
      \begin{bmatrix}[ccc]
        1 & 2 & 3 \\
        0 & 1 & 1 \\
        0 & 0 & 0 \\
      \end{bmatrix}
    \)
  \item
    \(
      \begin{bmatrix}[ccc]
        1 & 0 & 0 \\
        0 & 1 & 0 \\
        0 & 0 & 1 \\
      \end{bmatrix}
    \) % correct
  \end{readinessAssuranceTestChoices}
  \end{multicols}

  \item What is the solution set of the following system of linear equations?
  \begin{alignat*}{4}
    2x_1 &\,+\,& x_2 &\,+\,& 4x_3 &\,=\,& 0 \\
     x_1 &\,+\,& x_2 &\,+\,&  x_3 &\,=\,& 1 \\
   -3x_1 &\,+\,& 4x_2 &\,+\,& x_3 &\,=\,& -7 \\
  \end{alignat*}

  \begin{multicols}{4}
  \begin{readinessAssuranceTestChoices}

  \item \(
          \setBuilder{ 
          \begin{bmatrix}
            1 +a\\ -2 \\ 1+3a
          \end{bmatrix}}{a \in \IR}
        \) 
  \item \(
          \left\{ \begin{bmatrix}
            1 \\ -6 \\ 1
          \end{bmatrix} \right\}
        \)
  \item \(
          \left\{ \begin{bmatrix}
            2 \\ 0 \\ -1
          \end{bmatrix} \right\}
        \) % correct
          \item \(\emptyset \) (i.e. the system is inconsistent).
  \end{readinessAssuranceTestChoices}
  \end{multicols}

  \item What is the solution set of the following system of linear equations?
  \begin{alignat*}{4}
    2x_1 &\,+\,& x_2 &\,+\,& 4x_3 &\,=\,& 0 \\
     x_1 &\,+\,& x_2 &\,+\,&  x_3 &\,=\,& 0 \\
  \end{alignat*}

  \begin{multicols}{4}
  \begin{readinessAssuranceTestChoices}
  \item \(\emptyset \) (i.e. the system is inconsistent).
  \item \(
         \setBuilder{ 
          \begin{bmatrix}
            -3a \\ 2a \\ a
          \end{bmatrix}}{a \in \IR}
        \)  % correct
  \item \(
          \left\{ \begin{bmatrix}
            4 \\ 1 \\ -5
          \end{bmatrix} \right\}
        \)
  \item \(
          \left\{\begin{bmatrix}
            1 \\ 2 \\ -1
          \end{bmatrix}\right\}
        \)
  \end{readinessAssuranceTestChoices}
  \end{multicols}



\end{readinessAssuranceTest}
\end{module}
\end{document}
